<svg width="1000" height="700" xmlns="http://www.w3.org/2000/svg">
  <style>
    .title { font: bold 28px sans-serif; fill: #2c3e50; }
    .subtitle { font: 16px sans-serif; fill: #34495e; }
    .label { font: 14px sans-serif; fill: #2c3e50; }
    .process { fill: #3498db; stroke: #2980b9; stroke-width: 2; rx: 10; ry: 10; }
    .sensor { fill: #e74c3c; stroke: #c0392b; stroke-width: 2; rx: 10; ry: 10; }
    .map { fill: #2ecc71; stroke: #27ae60; stroke-width: 2; rx: 10; ry: 10; }
    .robot { fill: #9b59b6; stroke: #8e44ad; stroke-width: 2; rx: 10; ry: 10; }
    .arrow { stroke: #2c3e50; stroke-width: 3; marker-end: url(#arrowhead); }
    .loop { stroke: #f39c12; stroke-width: 4; stroke-dasharray: 10,5; fill: none; }
  </style>

  <defs>
    <marker id="arrowhead" markerWidth="12" markerHeight="8" refX="11" refY="4" orient="auto">
      <polygon points="0 0, 12 4, 0 8" fill="#2c3e50" />
    </marker>
  </defs>

  <!-- Title -->
  <text x="500" y="40" text-anchor="middle" class="title">Mapping Loop System</text>
  <text x="500" y="70" text-anchor="middle" class="subtitle">Simultaneous Localization and Mapping (SLAM) Process</text>

  <!-- Robot Position -->
  <rect x="50" y="300" width="80" height="100" class="robot" />
  <circle cx="90" cy="290" r="20" class="robot" />
  <text x="90" y="330" text-anchor="middle" class="label">Robot</text>
  <text x="90" y="350" text-anchor="middle" class="label">Position</text>

  <!-- Sensors -->
  <rect x="50" y="150" width="80" height="60" class="sensor" />
  <text x="90" y="180" text-anchor="middle" class="label">LIDAR</text>

  <rect x="50" y="230" width="80" height="60" class="sensor" />
  <text x="90" y="260" text-anchor="middle" class="label">Cameras</text>

  <rect x="50" y="420" width="80" height="60" class="sensor" />
  <text x="90" y="450" text-anchor="middle" class="label">IMU</text>

  <rect x="50" y="500" width="80" height="60" class="sensor" />
  <text x="90" y="530" text-anchor="middle" class="label">GPS</text>

  <!-- Sensor Data Flow -->
  <line x1="130" y1="180" x2="200" y2="180" class="arrow" />
  <line x1="130" y1="260" x2="200" y2="260" class="arrow" />
  <line x1="130" y1="450" x2="200" y2="450" class="arrow" />
  <line x1="130" y1="530" x2="200" y2="530" class="arrow" />

  <!-- Data Processing Stage -->
  <rect x="200" y="200" width="140" height="160" class="process" />
  <text x="270" y="240" text-anchor="middle" class="label">Sensor</text>
  <text x="270" y="255" text-anchor="middle" class="label">Fusion</text>
  <text x="270" y="280" text-anchor="middle" class="label">Feature</text>
  <text x="270" y="295" text-anchor="middle" class="label">Extraction</text>
  <text x="270" y="320" text-anchor="middle" class="label">Data</text>
  <text x="270" y="335" text-anchor="middle" class="label">Integration</text>

  <!-- Processing Arrow -->
  <line x1="340" y1="280" x2="400" y2="280" class="arrow" />

  <!-- Mapping Stage -->
  <rect x="400" y="200" width="160" height="160" class="process" />
  <text x="480" y="240" text-anchor="middle" class="label">Mapping</text>
  <text x="480" y="255" text-anchor="middle" class="label">Algorithm</text>
  <text x="480" y="280" text-anchor="middle" class="label">Occupancy</text>
  <text x="480" y="295" text-anchor="middle" class="label">Grid</text>
  <text x="480" y="320" text-anchor="middle" class="label">Topological</text>
  <text x="480" y="335" text-anchor="middle" class="label">Map</text>

  <!-- Map Output -->
  <rect x="600" y="200" width="160" height="160" class="map" />
  <text x="680" y="250" text-anchor="middle" class="label">Environment</text>
  <text x="680" y="265" text-anchor="middle" class="label">Map</text>
  <text x="680" y="290" text-anchor="middle" class="label">Occupancy</text>
  <text x="680" y="305" text-anchor="middle" class="label">Grid</text>
  <text x="680" y="330" text-anchor="middle" class="label">Topological</text>
  <text x="680" y="345" text-anchor="middle" class="label">Structure</text>

  <!-- Map to Robot Arrow -->
  <line x1="680" y1="360" x2="680" y2="400" class="arrow" />

  <!-- Localization Stage -->
  <rect x="600" y="400" width="160" height="100" class="process" />
  <text x="680" y="430" text-anchor="middle" class="label">Localization</text>
  <text x="680" y="445" text-anchor="middle" class="label">Algorithm</text>
  <text x="680" y="470" text-anchor="middle" class="label">Pose</text>
  <text x="680" y="485" text-anchor="middle" class="label">Estimation</text>

  <!-- Robot Position Update -->
  <line x1="680" y1="500" x2="680" y2="550" class="arrow" />
  <line x1="680" y1="550" x2="90" y2="550" class="arrow" />
  <line x1="90" y1="550" x2="90" y2="400" class="arrow" />

  <!-- Loop Arrow -->
  <path d="M 680 550 Q 800 550 800 280 Q 760 280 760 500 Q 680 500 680 550" class="loop" />

  <!-- New Sensor Data -->
  <line x1="90" y1="400" x2="90" y2="480" class="arrow" />
  <line x1="90" y1="480" x2="200" y2="480" class="arrow" />
  <line x1="200" y1="480" x2="200" y2="360" class="arrow" />

  <!-- Map Types -->
  <rect x="800" y="150" width="150" height="100" class="map" />
  <text x="875" y="180" text-anchor="middle" class="label">Metric</text>
  <text x="875" y="195" text-anchor="middle" class="label">Map</text>
  <text x="875" y="210" text-anchor="middle" class="label">(Grid-based)</text>

  <rect x="800" y="270" width="150" height="100" class="map" />
  <text x="875" y="300" text-anchor="middle" class="label">Topological</text>
  <text x="875" y="315" text-anchor="middle" class="label">Map</text>
  <text x="875" y="330" text-anchor="middle" class="label">(Waypoints)</text>

  <rect x="800" y="390" width="150" height="100" class="map" />
  <text x="875" y="420" text-anchor="middle" class="label">Semantic</text>
  <text x="875" y="435" text-anchor="middle" class="label">Map</text>
  <text x="875" y="450" text-anchor="middle" class="label">(Objects)</text>

  <!-- Map Type Arrows -->
  <line x1="760" y1="280" x2="800" y2="200" class="arrow" />
  <line x1="760" y1="280" x2="800" y2="320" class="arrow" />
  <line x1="760" y1="280" x2="800" y2="440" class="arrow" />

  <!-- Loop Labels -->
  <text x="400" y="120" text-anchor="middle" class="subtitle">SLAM Loop Process</text>
  <text x="200" y="150" text-anchor="middle" class="label">1. Sense</text>
  <text x="300" y="150" text-anchor="middle" class="label">2. Process</text>
  <text x="480" y="150" text-anchor="middle" class="label">3. Map</text>
  <text x="680" y="150" text-anchor="middle" class="label">4. Localize</text>
  <text x="850" y="150" text-anchor="middle" class="label">5. Update</text>

  <!-- Iteration Counter -->
  <circle cx="900" cy="600" r="40" fill="#f1c40f" stroke="#f39c12" stroke-width="3" />
  <text x="900" y="605" text-anchor="middle" class="label">Iteration</text>
  <text x="900" y="620" text-anchor="middle" class="label">t+1</text>

  <!-- Loop Continuation -->
  <line x1="900" y1="560" x2="900" y2="500" class="arrow" />
  <line x1="900" y1="500" x2="800" y2="500" class="arrow" />
  <line x1="800" y1="500" x2="800" y2="100" class="arrow" />
  <line x1="800" y1="100" x2="150" y2="100" class="arrow" />
  <line x1="150" y1="100" x2="150" y2="350" class="arrow" />
  <line x1="150" y1="350" x2="130" y2="350" class="arrow" />

  <!-- Legend -->
  <rect x="50" y="600" width="250" height="80" fill="none" stroke="#bdc3c7" stroke-width="1" />
  <text x="60" y="620" class="label">Legend:</text>
  <rect x="60" y="630" width="15" height="15" class="sensor" />
  <text x="80" y="642" class="label">Sensors</text>
  <rect x="140" y="630" width="15" height="15" class="process" />
  <text x="160" y="642" class="label">Processing</text>
  <rect x="220" y="630" width="15" height="15" class="map" />
  <text x="240" y="642" class="label">Map</text>

  <!-- Process Description -->
  <text x="500" y="650" text-anchor="middle" class="subtitle">Continuous loop: Sense → Process → Map → Localize → Update → Repeat</text>
</svg>